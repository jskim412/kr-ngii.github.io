# 국토지리정보원 QGIS 플러그인 저장소
이 사이트는 국토지리정보원의 공간자료를 쉽게 사용할 수 있게 도와주는 플러그인과 품질검사 관련 플러그인 등의 유용한 QGIS 플러그인을 배포하는 저장소입니다.

## 플러그인 저장소 이용 방법
1. QGIS 설치
   - 이미 QGIS 2.14, 혹은 2.18 버전이 설치된 분은 이 단계를 무시하고 다음 단계로 넘어가시면 됩니다.
   - 아쉽게도 QGIS 3.0은 아직 지원되지 않습니다. 가능하시면 QGIS 2.18 버전을 사용해 주세요.
   - QGIS는 무료 오픈소스 GIS 프로그램으로 기업과 개인 누구나 자유롭게 사용 가능합니다.
   - QGIS 설치 프로그램 다운로드를 위해 다음 경로로 이동합니다. <https://qgis.org/ko/site/forusers/download.html>
   - 이 중'QGIS 독립 설치관리자 버전 2.18 버전'중 자신의 OS에 맞는 버전을 받으시면 됩니다.
   - 혹시 자신의 OS에 맞는 버전을 모르면 'QGIS 독립 설치관리자 버전 2.18 버전(32 비트)'를 받으시면 됩니다.
   ![QGIS 다운로드 화면](./images/1_download.png)
   - 다운로드 받은 설치관리자 프로그램은 실행하시고 다음, 다음만 하면 쉽게 설치됩니다.

2. 플러그인 관리자에 플러그인 저장소 경로 추가
   - QGIS가 설치되면 실행해 주십시오.
   - QGIS의 메뉴 중 [플러그인-플러그인 관리 및 설치...] 메뉴를 선택해 주십시오.
   ![QGIS 플러그인 관리자 실행](./images/2_menu.png)
   - '플러그인 관리자' 창이 뜨면 [설정] 탭을 선택하고, [추가] 버튼을 눌러주십시오.
   ![추가버튼 선택](./images/2_add_button.png)
   - '저장소 상세정보' 창의 '이름'에 'NGII Repo', 'URL'에 'https://kr-ngii.github.io/plugins.xml'을 입력하시고 [확인] 버튼을 누러주세요.
   ![상세정보 입력](./images/2_fill_info.png)
   - NGII 저장소가 추가되며 저장소에서 정보를 다시 불러옵니다.
   - 혹시 저장소 정보를 불러오는 중 오류가 발생하면 [모든 저장소 다시 불러오기] 버튼을 누르면 대부분 해결 됩니다.

3. 원하는 플러그인 찾기와 설치
   - 이제 '플러그인 관리자'에서 [모두] 탭을 선택하고, '검색' 항목에 'ngii'를 입력합니다.
   - 그럼 국토지리정보원과 관련된 플러그인이 검색됩니다.
   - 설치를 원하는 플러그인을 선택하시고 [플러그인 설치] 버튼을 누르시면 쉽게 설치 됩니다.
   - 이 설명에서는 품질검사 결과 뷰어인 NgiiQiReportView를 예로 들겠습니다.
   ![NGII 플러그인들](./images/3_ngii_plugins.png)
   - ngii 라는 검색어로 검색된 플러그인 중 NgiiQiReportViewer를 선택하고
   - [플러그인 설치] 버튼을 누르면 플러그인이 자동으로 설치됩니다.
   - 설치가 정상적으로 수행되면 QGIS 메뉴에 'NGII'라는 메뉴 아래에 '품질검사 결과 뷰어'메뉴가 생기고 툴바에도 QI Report Viewer라는 버튼이 생기게 됩니다.

## 품질검사 결과 뷰어 사용법
1. 시작하기
   - NgiiQiReportView 플러그인을 설치하면 QGIS 메뉴에 'NGII'라는 메뉴 아래에 '품질검사 결과 뷰어'메뉴가 생기고 툴바에도 QI Report Viewer라는 버튼이 생기게 됩니다.
   - 메뉴의 '품질검사 결과 뷰어' 항목을 선택하거나 툴바의 QI Report Viewer라는 버튼을 선택하면 QGIS 화면 오른쪽에 '품질검사 결과 뷰어' 창이 붙게 됩니다.
   - 다시 한번 해당 메뉴나 툴바의 버튼을 클릭하면 사라지고, 만일 사라진 '품질검사 결과 뷰어' 창을 다시 생기게 하고 싶다면 다시 메뉴나 버튼을 선택하면 됩니다.
   ![품질검사 결과 뷰어 화면](./images/2-1_ReportWindow.png)

2. 검사결과 불러오기
   - 국토기본정보 품질검사 결과로 생긴 검사결과 Shape 파일을 공간정보로 보는 과정입니다.
   - '검사결과파일 선택' 부분의 [...] 버튼을 클릭하면 파일을 선택하는 창이 나옵니다.
   - 여기서 검사결과가 있는 폴더로 가서 err_index.shp, 혹은 err_idx.shp 파일을 선택해 주면 됩니다.
   ![결과파일 선택](./images/2-2_open.png)

3. 개별 오류내용 보기
   - 검사결과 파일을 선택하시면, 해당 파일을 분석해서 오류리스트에 오류 내용이 계층구조로 나오게 됩니다.
   - 초기에 오류내용은 오류 종류별 항목까지만 펼쳐저 있습니다. 이 항목을 펼치면 세부 오류 항목이 나옵니다.
   - 예를 들어 논리일관성 - 건물 - 건물/차도 침범 항목을 펼치면 오류 항목들이 나오고, 각 항목을 더블클릭 하면,
   - 오류가 발생한 위치로 화면이 이동하고, 오류 상황의 캡처 화면이 보이게 됩니다.
   - 오류 요약 정보 부분에는 객체ID(지지변 등록ID), 오류내용, 예외 내용(입력된 경우만), 썸네일(오류 캡처)이 보이게 됩니다.
   ![오류내용 상세](./images/2-3_error_detail.png)

4. 납품 국토기본정보 데이터 불러오기
   - 오류 화면만 봐서는 오류의 상황이 명확하지 않은 경우가 많습니다.
   - 이 때 판단을 위해서는 납품된 국토기본정보 자료를 불러오셔야 합니다.
   - 국토기본정보 파일 중 TN_BULD 파일이 건물이며, TN_RLROAD_BNDRY 파일이 차도경계면입니다.
   - 기타 국토기본정보 레이어 명은 표준문서를 참고하시면 아실 수 있습니다.
   - 예를 들어 QGIS 화면의 왼쪽에 있는 Browser Panel에서 건물 데이터인 TN_BULD 파일을 더블클릭 하면 해당 파일이 Layers Panel로 들어오게 됩니다.
   ![납품파일 불러오기](./images/2-4_load.png)

5. 객체 속성을 시각화하기
   - 대부분 건물이 도로경계면을 침범하면 오류입니다.
   - 하지만, 건물 중 무백건물은 도로위에 올라올 수 있기에 건물을 종류별로 시각화 할 필요가 있습니다.
   - Browser Panel의 TN_BULD 파일을 오른쪽 마우스로 클릭하고 [속성] 메뉴를 선택하면 레이어 속성 창이 뜹니다.
   - 레이어 속성 창의 오른쪽에 있는 [스타일] 탭을 선택합니다.
   - 상단에 'Single symbol'(혹은 '단순 심벌') 부분을 선택하면 여러가지 표현방법이 나옵니다.
   - 이 중 '분류값 사용'을 선택합니다.
   - '컬럼' 항목에서 'BULD_SE' 컬럼을 선택합니다.
   - 중간 부분의 [분류] 버튼을 클릭합니다.
   - 하단의 [확인] 버튼을 클릭해 창을 닫으면 건물 종류에 따라 색이 달라진 것을 확인할 수 있습니다.
   - 도로경계면도 유사한 과정을 거쳐 속성별로 시각화 할 수 있습니다.
   ![속성 시각화](./images/2-5_classfy.png)

6. 인터넷 지도 플러그(TMS for Korea)인 설치
   - 일반 인터넷 지도도 참고자료로 유용한 경우가 많습니다. 이를 불러와 보겠습니다.
   - 인터넷 지도를 불러오기 위해서는 TMS for Korea 플러그인이 가장 많이 사용됩니다.
   - QGIS의 플러그인-플러그인관리 및 설치 메뉴를 선택해 플러그인 관리자를 띄웁니다.
   - 검색에 korea를 입력하면 'TMS for Korea' 플러그인이 검색됩니다.
   - [플러그인 설치] 버튼을 누르면 자동으로 설치됩니다.
   - [닫기] 버틈을 눌러 플러그인 관리자를 닫습니다.
   ![TMS for Korea](./images/2-6_tms_for_korea.png)

7. 네이버 지도 불러오기
   - QGIS 메뉴 중 웹-Naver Map-Naver Satellite 메뉴를 선택하면 지리원 정사영상과 동일한 항공영상을 불러올 수 있습니다.
   - 일반 인터넷 지도도 비슷한 방법으로 간단히 불러올 수 있습니다.
   - 한 가지 주의할 것이 QGIS에 여러 레이어를 불러올 수 있기에 레이어 순서가 중요한데, 간혹 Naver Satellite 등의 인터넷 지도가 다른 자료 위로 올라가 다른 자료가 안보이는 경우가 있습니다.
   - 이 경우 이 레이어를 Layer Panel에서 선택해 제일 아래에 있도록 끌어 내려주면 간단히 문제가 해결됩니다.
   ![네이버 지도](./images/2-7_naver_map.png)

